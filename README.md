Deskew
======

This program converts a bitstream generated by a Bernoulli process with unknown `p` into a bitstream generated by a Bernoulli process with `p = 0.5`.
In other words: the program removes (unknown) bias.

The program works in a streaming fashion, e.g. on a (theoretically) infinite bitstream and achieves the theoretically optimal result (if the state tree can grow indefinitely).
This contrasts e.g. [Von Neumanns well-known extractor](https://en.wikipedia.org/wiki/Randomness_extractor#Von_Neumann_extractor). 

This program is a partial implementation of a paper titled "Streaming Algorithms for Optimal Generation of Random Bits", authored by Hongchao Zhou and Jehoshua Bruck.

Examples
--------

Some examples

```
$ r --slave -e 'cat(rbinom(1000000, 1, .9999), sep="")' | ./Main.hs 
 input: (p = 0.999898)
output: (p = 0.5009940357852882)
0101011100000000011101011000011101100111010010111111111111111100110101010100110100110001011011000111100010010000110100010110101000101001011110010100001101101001110111110111000000101011100111011111000000011111101101000111111101000010010000011111000011111001000100010000110010101101111100001010010111111110000010101111001000110000011011010110001101001111000110100111110001011111001110100010100000011100010000110100101101110001101010100101100110001111001001111001101100100110011110000011101011000001000000001101101110110000110100010101010110001001110010100000000011001011111000111001001001010000001001000011100001101110101100111101001010000111011111110011110010011000001110011010010000110011101011000111000001011100101101110100000000101001100001010011101011001100001101111111111101100110101011100010001010011011011001101110010001100011011010111011011000011100011011011010010111011110110101110001101111111001101111110010100000101100010100001111010100000110000011010110001010010111011110110000010101001100110101

$ r --slave -e 'cat(rbinom(1000000, 1, .0001), sep="")' | ./Main.hs 
 input: (p = 9.0e-5)
output: (p = 0.507411630558723)
0001111000101110110000000101100011110111001110110100010111001001001000001011001111000100111110101100011100100111000010110100100101101001111101110000010111001111111100111100101111001000001111101010111000010001001010100001100011100010001001111010110110111000101010110100100011011110111000000011001100110010101101000011001011000101101011011111101100100010110000001001101011110010011011010110101100100111001010000001010110010011001011000010000110011110100100000110111111110100100001010000110001111101000111100001111010101101110010101100000110100111011110000111010101111110010010111011101111001101110100111010101111011001101000111100110001101101010001000101111100111010010101111000001111110010110011001010010011001110111010011001000011011100000011001011101110111011101000111010100100000101100100001110100110101101110001000010110010111110001000101111001010101010001001011010110101000

$ r --slave -e 'cat(rbinom(100, 1, .25), sep="")' | ./Main.hs 
 input: (p = 0.33)
output: (p = 0.5272727272727272)
0001101001010111000110011010111110110101001101100001101
```
